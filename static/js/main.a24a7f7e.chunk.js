(this["webpackJsonpreact-state-building-script"]=this["webpackJsonpreact-state-building-script"]||[]).push([[0],{13:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(7),c=a.n(r);a(13);function i(){return l.a.createElement("footer",null,l.a.createElement("p",null,"This site is created for demonstrative purposes only and does not offer any real products or services."),l.a.createElement("p",null,"\xa9 Mohamed Nawaz @ CleanCodeOnline 2021"))}var s=a(2);const o={color:"lightblue"};function u(){return l.a.createElement("header",null,l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(s.b,{to:"/"},l.a.createElement("img",{alt:"Carved Rock Fitness",src:"/fitness-care/images/logo.png"}))),l.a.createElement("li",null,l.a.createElement(s.c,{activeStyle:o,to:"/shoes"},"Shoes")),l.a.createElement("li",null,l.a.createElement(s.c,{activeStyle:o,to:"/gym"},"Muscle")),l.a.createElement("li",null,l.a.createElement(s.c,{activeStyle:o,to:"/streaching"},"Fitness")),l.a.createElement("li",null,l.a.createElement(s.c,{activeStyle:o,to:"/cart"},"Cart")))))}const m=[{id:1,category:"shoes",image:"shoe1.jpg",name:"Hiker",price:94.95,skus:[{sku:"17",size:7},{sku:"18",size:8}],description:"This rugged boot will get you up the mountain safely."},{id:2,category:"gym",image:"gym2.png",name:"Dumbells and shoes",price:383.85,skus:[{sku:"17",size:7},{sku:"18",size:8}],description:"Pair of black colored dumbells and shoes."},{id:3,category:"shoes",image:"shoe2.jpg",name:"Climber",price:78.99,skus:[{sku:"28",size:8},{sku:"29",size:9}],description:"Sure-footed traction in slippery conditions."},{id:4,category:"gym",image:"gym4.png",name:"Long barbell",price:482.5,skus:[{sku:"39",size:9}],description:"Long sized heavy category barbell."},{id:5,category:"streaching",image:"streaching3.png",name:"Fitness ball",price:500,skus:[{sku:"37",size:7},{sku:"39",size:9}],description:"Heavy sized fitness exercise ball."},{id:6,category:"gym",image:"gym1.png",name:"Dumbells and muscle streaching cable",price:400.85,skus:[{sku:"37",size:7},{sku:"38",size:8}],description:"Pair of black colored dumbells and streaching cable."},{id:7,category:"shoes",image:"shoe3.jpg",name:"Explorer",price:246.25,skus:[{sku:"37",size:7},{sku:"39",size:9}],description:"Simple normal football for extreme conditions."}];function d(e){const t=l.a.useRef(!1),[a,n]=l.a.useState(null),[r,c]=l.a.useState(null),[i,s]=l.a.useState(!0);return l.a.useEffect(()=>{t.current=!0;return new Promise(t=>{setTimeout(()=>{if(e.includes("products"))t(m);else if(e.includes("products/")){const a=parseInt(e.split("/").pop(),10),n=m.find(e=>e.id===a);t(n)}else t(null)},500)}).then(e=>{t.current&&n(e)}).catch(e=>{t.current&&c(e)}).finally(()=>{t.current&&s(!1)}),()=>{t.current=!1}},[e]),{data:a,error:r,loading:i}}function p(){return l.a.createElement("div",{className:"lds-container"},l.a.createElement("div",{className:"lds-dual-ring"}))}function E(){return l.a.createElement("h1",null,"Page Not Found.")}var g=a(1);function h(){const[e,t]=l.a.useState(""),{category:a}=Object(g.h)(),{data:n,error:r,loading:c}=d("products?category="+a),i=e?n.filter(t=>t.skus.find(t=>t.size===parseInt(e))):n;if(r)throw r;return c?l.a.createElement(p,null):0===n.length?l.a.createElement(E,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{id:"filters"},l.a.createElement("label",{htmlFor:"size"},"Filter by Size:")," ",l.a.createElement("select",{id:"size",value:e,onChange:e=>{t(e.target.value)}},l.a.createElement("option",{value:""},"All sizes"),l.a.createElement("option",{value:"7"},"7"),l.a.createElement("option",{value:"8"},"8"),l.a.createElement("option",{value:"9"},"9"))),e&&l.a.createElement("h2",null,i.length," items found"),l.a.createElement("section",{id:"products"},i.map(e=>l.a.createElement("div",{key:e.id,className:"product"},l.a.createElement(s.b,{to:"/".concat(a,"/").concat(e.id)},l.a.createElement("img",{src:"".concat("/fitness-care","/images/").concat(e.image),alt:e.name}),l.a.createElement("h3",null,e.name),l.a.createElement("p",null,"$",e.price))))))}var y=a(4);const f=(e,t)=>{switch(t.type){default:throw new Error("Unhandled action type "+t.type);case"empty-cart":return[];case"add-to-cart":{const{id:a,sku:n}=t;return e.find(e=>e.sku===n)?e.map(e=>e.sku===n?Object(y.a)(Object(y.a)({},e),{},{quantity:e.quantity+1}):e):[...e,{id:a,sku:n,quantity:1}]}case"update-cart-quantity":const{sku:a,quantity:n}=t;return 0===n?e.filter(e=>e.sku!==a):e.map(e=>e.sku===a?Object(y.a)(Object(y.a)({},e),{},{quantity:n}):e)}},b=(e,t)=>{switch(t.type){default:throw new Error("Unhandled action type "+t.type);case"handle-address-change":const{e:a}=t;return Object(y.a)(Object(y.a)({},e),{},{[a.target.id]:a.target.value});case"handle-touched-change":const{event:n}=t;return Object(y.a)(Object(y.a)({},e),{},{[n.target.id]:!0})}},v=l.a.createContext(null);let k=[];try{const e=localStorage.getItem("cart");e&&(k=JSON.parse(e))}catch(B){console.error("Failed to parse cart from localStorage",B)}function S({children:e}){const[t,a]=l.a.useReducer(f,k);return l.a.useEffect(()=>{try{localStorage.setItem("cart",JSON.stringify(t))}catch(B){console.error("Failed to save cart to localStorage",B)}},[t]),l.a.createElement(v.Provider,{value:{cart:t,dispatch:a}},e)}const z=l.a.createContext(null);let C={};try{const e=localStorage.getItem("shipping-address");e&&(C=JSON.parse(e))}catch(B){console.error("Failed to parse shipping address from localStorage",B)}function w({children:e}){const[t,a]=l.a.useReducer(b,C);return l.a.useEffect(()=>{try{localStorage.setItem("shipping-address",JSON.stringify(t))}catch(B){console.error("Failed to save shipping address to localStorage",B)}},[t]),l.a.createElement(z.Provider,{value:{shippingAddress:t,dispatchShipping:a}},e)}function I(){const{dispatch:e}=l.a.useContext(v),[t,a]=l.a.useState(""),{id:n}=Object(g.h)(),r=Object(g.g)(),{data:c,error:i,loading:s}=d("products/"+n);if(s)return l.a.createElement(p,null);if(!c)return l.a.createElement(E,null);if(i)throw i;return l.a.createElement("div",{id:"detail"},l.a.createElement("div",{className:"detail-column"},l.a.createElement("h1",null,c.name),l.a.createElement("p",null,c.description),l.a.createElement("p",{id:"price"},"$",c.price),l.a.createElement("select",{id:"size",value:t,onChange:e=>a(e.target.value)},l.a.createElement("option",{value:""},"Size"),c.skus.map(e=>l.a.createElement("option",{key:e.sku,value:e.sku},e.size))),l.a.createElement("p",null,l.a.createElement("button",{className:"btn btn-primary",onClick:()=>{e({type:"add-to-cart",id:n,sku:t}),r("/cart")},disabled:!t},"Add to Cart"))),l.a.createElement("div",{className:"detail-column"},l.a.createElement("img",{src:"/images/".concat(c.image),alt:c.category})))}const F=[{id:1,category:"shoes",image:"shoe1.jpg",name:"Hiker",price:94.95,skus:[{sku:"17",size:7},{sku:"18",size:8}],description:"This rugged boot will get you up the mountain safely."},{id:2,category:"gym",image:"gym2.png",name:"Dumbells and shoes",price:383.85,skus:[{sku:"17",size:7},{sku:"18",size:8}],description:"Pair of black colored dumbells and shoes."},{id:3,category:"shoes",image:"shoe2.jpg",name:"Climber",price:78.99,skus:[{sku:"28",size:8},{sku:"29",size:9}],description:"Sure-footed traction in slippery conditions."},{id:4,category:"gym",image:"gym4.png",name:"Long barbell",price:482.5,skus:[{sku:"39",size:9}],description:"Long sized heavy category barbell."},{id:5,category:"streaching",image:"streaching3.png",name:"Fitness ball",price:500,skus:[{sku:"37",size:7},{sku:"39",size:9}],description:"Heavy sized fitness exercise ball."},{id:6,category:"gym",image:"gym1.png",name:"Dumbells and muscle streaching cable",price:400.85,skus:[{sku:"37",size:7},{sku:"38",size:8}],description:"Pair of black colored dumbells and streaching cable."},{id:7,category:"shoes",image:"shoe3.jpg",name:"Explorer",price:246.25,skus:[{sku:"37",size:7},{sku:"39",size:9}],description:"Simple normal football for extreme conditions."}];function N(e){const t=l.a.useRef(!1),[a,n]=l.a.useState(null),[r,c]=l.a.useState(!0),[i,s]=l.a.useState(null);return l.a.useEffect(()=>{t.current=!0;const a=e.map(e=>(e=>new Promise((t,a)=>{setTimeout(()=>{if(e.includes("products"))t(F);else if(e.includes("products/")){const n=parseInt(e.split("/").pop(),10),l=F.find(e=>e.id===n);l?t(l):a(new Error("Product not found"))}else a(new Error("Invalid URL"))},500)}))(e));return Promise.all(a).then(e=>{t.current&&n(e)}).catch(e=>{t.current&&s(e)}).finally(()=>{t.current&&c(!1)}),()=>{t.current=!1}},[e]),{data:a,loading:r,error:i}}function O(){const{cart:e,dispatch:t}=l.a.useContext(v),a=Object(g.g)(),n=e.map(e=>"products/".concat(e.id)),{data:r,loading:c,error:i}=N(n);const s=l.a.useMemo(()=>e.reduce((e,t)=>e+t.quantity,0),[e]);if(c)return l.a.createElement(p,null);if(i)throw i;return l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{id:"cart"},0===e.length?l.a.createElement("h1",null,"Cart is empty"):"".concat(s,1===s?" item found":" items found"),l.a.createElement("ul",null,e.map((function(e){const{id:a,sku:n,quantity:c}=e,{price:i,name:s,image:o,skus:u}=r.find(e=>e.id===parseInt(a)),{size:m}=u.find(e=>e.sku===n);return l.a.createElement("li",{key:n,className:"cart-item"},l.a.createElement("img",{src:"".concat("/fitness-care","/images/").concat(o),alt:s}),l.a.createElement("div",null,l.a.createElement("h3",null,s),l.a.createElement("p",null,"$",i*c),l.a.createElement("p",null,"Size: ",m),l.a.createElement("p",null,l.a.createElement("select",{"aria-label":"Select quantity for ".concat(s," size ").concat(m),onChange:e=>t({type:"update-cart-quantity",sku:n,quantity:parseInt(e.target.value)}),value:c},l.a.createElement("option",{value:"0"},"Remove"),l.a.createElement("option",{value:"1"},"1"),l.a.createElement("option",{value:"2"},"2"),l.a.createElement("option",{value:"3"},"3"),l.a.createElement("option",{value:"4"},"4"),l.a.createElement("option",{value:"5"},"5")))))})))),e.length?l.a.createElement("p",null,l.a.createElement("button",{className:"btn btn-primary",onClick:()=>a("/checkout")},"Checkout")):null)}const j=[{city:"Mumbai",country:"India",id:1},{city:"London",country:"United Kingdom",id:2},{country:"United Kingdom",city:"London",id:3}];const x="IDLE",P="SUBMITTING",q="SUBMITTED",U="COMPLETED",T="PAYED";function D(){let e=0;const{cart:t,dispatch:a}=l.a.useContext(v),n=t.map(e=>"products/".concat(e.id)),{data:r,loading:c,error:i}=N(n),{shippingAddress:s,dispatchShipping:o}=l.a.useContext(z),[u,m]=l.a.useState(x),[d,E]=l.a.useState(null),[g,h]=l.a.useReducer(b,{}),y=function(e){const t={};e.city||(t.city="city is required");e.country||(t.country="country is required");return t}(s),f=0===Object.keys(y).length;function k(e){e.persist(),o({type:"handle-address-change",e:e})}function S(e){e.persist(),h({type:"handle-touched-change",event:e})}async function C(e){if(e.preventDefault(),m(P),f)try{localStorage.setItem("shipping-address",JSON.stringify(s)),await async function(e){return new Promise(t=>{setTimeout(()=>{const a=j.findIndex(t=>t.id===e.id);a>=0?j[a]=e:j.push(e),t({success:!0})},200)})}(s),m(U)}catch(t){E(t)}else m(q)}const w=l.a.useMemo(()=>t.reduce((e,t)=>e+t.quantity,0),[t]);if(c)return l.a.createElement(p,null);if(i)throw i;if(d)throw d;return u===T?l.a.createElement("h1",null,"Thanks for shopping"):l.a.createElement(l.a.Fragment,null,s.city&&s.country?l.a.createElement("main",{id:"checkout-main"},l.a.createElement("div",{className:"cart"},l.a.createElement("h1",null,"Cart"),l.a.createElement("section",{id:"cart"},"".concat(w,1===w?" item found":" items found"),l.a.createElement("ul",null,t.map((function(t){const{id:a,sku:n,quantity:c}=t,{price:i,name:s,image:o,skus:u}=r.find(e=>e.id===parseInt(a)),{size:m}=u.find(e=>e.sku===n);return e+=i*c,l.a.createElement("li",{key:n,className:"cart-item"},l.a.createElement("img",{src:"/images/".concat(o),alt:s}),l.a.createElement("div",null,l.a.createElement("h3",null,s),l.a.createElement("p",null,"$",i*c),l.a.createElement("p",null,"Size: ",m),l.a.createElement("p",null,"Quantity: ",c)))})))),l.a.createElement("p",{style:{color:"green",fontWeight:"bold"}},"$ ".concat(Math.ceil(e))),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a({type:"empty-cart"}),m(T)}},l.a.createElement("div",null,l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Checkout",disabled:u===P})))),l.a.createElement("div",{className:"shipping-info"},l.a.createElement("div",{style:{marginBottom:20}},l.a.createElement("h1",null,"Shipping Info")),!f&&u===q&&l.a.createElement("div",{role:"alert"},l.a.createElement("p",null,"Please fix the following errors"),l.a.createElement("ul",null,Object.keys(y).map(e=>l.a.createElement("li",{key:e},y[e])))),l.a.createElement("form",{onSubmit:C},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"city"},"City"),l.a.createElement("br",null),l.a.createElement("input",{id:"city",type:"text",value:s.city,onBlur:S,onChange:k}),l.a.createElement("p",{role:"alert"},(g.city||u===q)&&y.city)),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"country"},"Country"),l.a.createElement("br",null),l.a.createElement("select",{id:"country",value:s.country,onBlur:S,onChange:k},l.a.createElement("option",{value:""},"Select Country"),l.a.createElement("option",{value:"China"},"China"),l.a.createElement("option",{value:"India"},"India"),l.a.createElement("option",{value:"United Kingdom"},"United Kingdom"),l.a.createElement("option",{value:"USA"},"USA")),l.a.createElement("p",{role:"alert"},(g.country||u===q)&&y.country)),l.a.createElement("div",null,u===U&&l.a.createElement("p",{style:{color:"blue"}},"Shipping address saved"),l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save Shipping Info",disabled:u===P}))))):l.a.createElement("main",{id:"checkout-main"},l.a.createElement("div",{className:"shipping-info"},l.a.createElement("h1",null,"Shipping Info"),!f&&u===q&&l.a.createElement("div",{role:"alert"},l.a.createElement("p",null,"Please fix the following errors"),l.a.createElement("ul",null,Object.keys(y).map(e=>l.a.createElement("li",{key:e},y[e])))),l.a.createElement("form",{onSubmit:C},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"city"},"City"),l.a.createElement("br",null),l.a.createElement("input",{id:"city",type:"text",value:s.city,onBlur:S,onChange:k}),l.a.createElement("p",{role:"alert"},(g.city||u===q)&&y.city)),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"country"},"Country"),l.a.createElement("br",null),l.a.createElement("select",{id:"country",value:s.country,onBlur:S,onChange:k},l.a.createElement("option",{value:""},"Select Country"),l.a.createElement("option",{value:"China"},"China"),l.a.createElement("option",{value:"India"},"India"),l.a.createElement("option",{value:"United Kingdom"},"United Kingdom"),l.a.createElement("option",{value:"USA"},"USA")),l.a.createElement("p",{role:"alert"},(g.country||u===q)&&y.country)),l.a.createElement("div",null,u===U&&l.a.createElement("p",{style:{color:"blue"}},"Shipping address saved"),l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save Shipping Info",disabled:u===P}))))))}function A(){const[e,t]=l.a.useState(""),{data:a,error:n,loading:r}=d("products"),c=e?a.filter(t=>t.category===e):a;if(n)throw n;if(r)return l.a.createElement(p,null);if(0===a.length)return l.a.createElement(E,null);const i=a.map(e=>e.category),o=[...new Set(i)];return l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{id:"filters"},l.a.createElement("label",{htmlFor:"size"},"Filter by Category:")," ",l.a.createElement("select",{id:"size",value:e,onChange:e=>{t(e.target.value)}},l.a.createElement("option",{value:""},"Select category"),o.map(e=>l.a.createElement("option",{key:e,value:e},e)))),e&&l.a.createElement("h2",null,c.length," items found"),l.a.createElement("section",{id:"products"},c.map(e=>l.a.createElement("div",{key:e.id,className:"product"},l.a.createElement(s.b,{to:"/".concat(e.category,"/").concat(e.id)},l.a.createElement("img",{src:"".concat("/fitness-care","/images/").concat(e.image),alt:e.name}),l.a.createElement("h3",null,e.name),l.a.createElement("p",null,"$",e.price))))))}function L(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"content"},l.a.createElement(u,null),l.a.createElement("main",null,l.a.createElement(g.c,null,l.a.createElement(g.a,{path:"/",element:l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Welcome to Fitness Care"),l.a.createElement(A,null))}),l.a.createElement(g.a,{path:"/:category",element:l.a.createElement(h,null)}),l.a.createElement(g.a,{path:"/:category/:id",element:l.a.createElement(I,null)}),l.a.createElement(g.a,{path:"/cart",element:l.a.createElement(O,null)}),l.a.createElement(g.a,{path:"/checkout",element:l.a.createElement(w,null,l.a.createElement(D,null))})))),l.a.createElement(i,null))}class M extends l.a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}render(){return this.state.hasError?l.a.createElement("h1",null,"Something went wrong."):this.props.children}}c.a.render(l.a.createElement(M,null,l.a.createElement(s.a,null,l.a.createElement(S,null,l.a.createElement(L,null)))),document.getElementById("root"))},8:function(e,t,a){e.exports=a(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.a24a7f7e.chunk.js.map